(()=>{"use strict";var e,t,c,s;c=document.querySelector(".main-slider").querySelectorAll(".slide"),s=0,setInterval((function(){c[s].classList.add("hidden-block"),++s>=c.length&&(s=0),c[s].classList.remove("hidden-block")}),2e3),function(){for(var e,t=document.querySelector(".gallery-slider"),c=document.querySelectorAll(".gallery-slides"),s=document.querySelector(".switchers"),n=0,o=function(e,t,c){e[t].classList.remove(c)},l=function(e,t,c){e[t].classList.add(c)},a=function(){o(c,n,"gallery-slides-active"),o(m,n,"dot-active"),++n>=c.length&&(n=0),l(c,n,"gallery-slides-active"),l(m,n,"dot-active")},i=function(){e=setInterval(a,2e3)},r=0;r<c.length;r++){var d=document.createElement("li");s.appendChild(d),0===r?(d.classList.add("dot"),d.classList.add("dot-active")):d.classList.add("dot")}var m=document.querySelectorAll(".dot");t.addEventListener("click",(function(e){var t=e.target;t.matches(".fa-chevron-right, .photoGallery__next, .photoGallery__prev, .fa-chevron-left, .dot")&&(o(c,n,"gallery-slides-active"),o(m,n,"dot-active"),t.matches(".photoGallery__next")||t.matches(".fa-chevron-right")?n++:t.matches(".photoGallery__prev")||t.matches(".fa-chevron-left")?n--:t.matches(".dot")&&m.forEach((function(e,c){e===t&&(n=c)})),n>=c.length&&(n=0),n<0&&(n=c.length-1),l(c,n,"gallery-slides-active"),l(m,n,"dot-active"))})),t.addEventListener("mouseover",(function(t){t.target.matches(".fa-chevron-right, .photoGallery__next, .photoGallery__prev, .fa-chevron-left, .dot")&&clearInterval(e)})),t.addEventListener("mouseout",(function(e){e.target.matches(".fa-chevron-right, .photoGallery__next, .photoGallery__prev, .fa-chevron-left, .dot")&&i()})),i()}(),function(){var e=document.querySelectorAll(".name"),t=document.getElementById("free-visit-name"),c=document.getElementById("callback_form2-phone"),s=document.getElementById("callback_form1-name"),n=document.getElementById("callback_form1-phone");e.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^А-Яа-я ]/,"")})),e.addEventListener("focus",(function(){e.style.border="1px solid #ffd11a"})),e.addEventListener("blur",(function(){e.style.border="",""!==e.value&&(e.value=e.value.replace(/\s+/g," ").trim(),e.value=e.value.replace(/[-]+/g,"-"),e.value=e.value.replace(/^\-+|\-+$/g,""),e.value=e.value.split(/\s+/).map((function(e){return e[0].toUpperCase()+e.substring(1)})).join(" "))}))})),maskPhone(".phone");var o=window.location.pathname.split("/").pop(),l=document.querySelector(".club-select"),a=document.querySelector(".clubs-show");a.classList.add("hidden-block"),l.addEventListener("click",(function(e){e.target.classList.contains("choose-club")&&a.classList.toggle("hidden-block")}));var i=document.querySelector(".open-popup"),r=document.getElementById("free_visit_form"),d=document.querySelector(".callback-btn"),m=document.getElementById("callback_form");i.addEventListener("click",(function(){r.style.display="block"})),d.addEventListener("click",(function(){m.style.display="block"}));var u=document.querySelector(".fixed-gift"),v=document.getElementById("gift");document.addEventListener("click",(function(e){var o=e.target;o.classList.contains("overlay")||o.classList.contains("close_icon")||o.classList.contains("close-btn")||o.classList.contains("btn-ok1")||o.classList.contains("btn-ok2")?(x.classList.add("hidden-block"),B.classList.add("hidden-block"),document.getElementById("form2").style.display="block",document.getElementById("form2").reset(),document.getElementById("form1").style.display="block",document.getElementById("form1").reset(),t.classList.remove("success"),c.classList.remove("success"),s.classList.remove("success"),n.classList.remove("success"),r.style.display="none",m.style.display="none",C.style.display="none",I.style.display="none",v.style.display="none"):o.classList.contains("gift-icon")&&(v.style.display="block",u.classList.add("hidden-block"))}));var h,y=document.getElementById("card_order"),f=document.getElementById("m1"),k=document.getElementById("m2"),p=document.getElementById("m3"),L=document.getElementById("m4"),g=document.getElementById("card_leto_mozaika"),_=document.getElementById("card_leto_schelkovo"),b=document.getElementById("promocode"),E=document.getElementById("price-total");""!==o&&"index.html"!==o||y.addEventListener("click",(function(e){var t=e.target;t.matches("#m1")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===f.checked?(b.value="",E.innerHTML="1999"):t.matches("#m2")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===k.checked?(b.value="",E.innerHTML="9990"):t.matches("#m3")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===p.checked?(b.value="",E.innerHTML="13900"):(t.matches("#m4")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===L.checked)&&(b.value="",E.innerHTML="19900"),t.matches("#m1")&&!0===_.checked||t.matches("#card_leto_schelkovo")&&!0===f.checked?(b.value="",E.innerHTML="2999"):t.matches("#m2")&&!0===_.checked||t.matches("#card_leto_schelkovo")&&!0===k.checked?(b.value="",E.innerHTML="14990"):t.matches("#m3")&&!0===_.checked||t.matches("#card_leto_schelkovo")&&!0===p.checked?(b.value="",E.innerHTML="21990"):(t.matches("#m4")&&!0===_.checked||t.matches("#card_leto_schelkovo")&&!0===L.checked)&&(b.value="",E.innerHTML="24990"),h=E.innerHTML})),""!==o&&"index.html"!==o||b.addEventListener("input",(function(){"ТЕЛО2020"===b.value?E.innerHTML=h-Math.ceil(.3*E.innerText):"ТЕЛО2020"!==b&&(E.innerHTML=h)}));var x=document.querySelector(".status-message-form1"),B=document.querySelector(".status-message-form2"),C=document.getElementById("thanks"),I=document.getElementById("bad-connection"),S="Сообщение отправлено. Наши менеджеры свяжутся с Вами в ближайшее время.",q=document.querySelectorAll("form"),T=document.createElement("div"),w=document.createElement("div");T.style.cssText="font-size: 1rem; margin-top: 5px; text-align: center; color: green",w.style.cssText="font-size: 1rem; margin-top: 5px; text-align: center; color: #d93025",q.forEach((function(e){var t=e.querySelector(".name"),c=e.querySelector(".phone"),s=e.querySelector(".checkbox"),n=e.querySelector(".radio");e.addEventListener("submit",(function(l){if(l.preventDefault(),!e.matches("#footer_form")&&t.classList.contains("success")&&c.classList.contains("success")&&!1===s.checked)e.appendChild(w),w.textContent="Необходимо согласиться на обработку данных";else if(e.matches("#footer_form")&&c.classList.contains("success")&&!1===s.checked&&!1===n.checked)e.appendChild(w),w.textContent="Необходимо выбрать один клуб";else if(!e.matches("#footer_form")&&t.classList.contains("success")&&c.classList.contains("success")&&!0===s.checked||c.classList.contains("success")&&!0===n.checked||e.matches("#footer_form")&&c.classList.contains("success")&&!0===n.checked||e.matches("#footer_form")&&c.classList.contains("success")&&!0===s.checked){w.textContent="",e.appendChild(T),T.innerHTML="  \n            <div class='sk-fading-circle'>\n                <div class='sk-circle sk-circle-1'></div>\n                <div class='sk-circle sk-circle-2'></div>\n                <div class='sk-circle sk-circle-3'></div>\n                <div class='sk-circle sk-circle-4'></div>\n                <div class='sk-circle sk-circle-5'></div>\n                <div class='sk-circle sk-circle-6'></div>\n                <div class='sk-circle sk-circle-7'></div>\n                <div class='sk-circle sk-circle-8'></div>\n                <div class='sk-circle sk-circle-9'></div>\n                <div class='sk-circle sk-circle-10'></div>\n                <div class='sk-circle sk-circle-11'></div>\n                <div class='sk-circle sk-circle-12'></div>\n            </div>\n            ";var a=new FormData(e);o(a).then((function(s){if(200!==s.status)throw new Error("status error not 200");e.classList.contains("form1")||e.classList.contains("form2")?(e.style.display="none",e.removeChild(T),C.style.display="block"):e.matches("#banner-form")?(C.style.display="block",t.classList.remove("success"),c.classList.remove("success"),e.reset(),T.textContent=""):e.matches("#footer_form")?(C.style.display="block",c.classList.remove("success"),e.reset(),T.textContent=""):e.classList.contains("card_order1")?(t.classList.remove("success"),c.classList.remove("success"),b.classList.remove("success"),T.textContent=S,E.innerHTML="1999",e.reset(),setTimeout((function(){T.textContent=""}),5e3)):(t.classList.remove("success"),c.classList.remove("success"),T.textContent=S,e.reset(),setTimeout((function(){T.textContent=""}),5e3))})).catch((function(s){e.classList.contains("form1")||e.classList.contains("form2")?(e.style.display="none",I.style.display="block"):e.matches("#banner-form")?(I.style.display="block",t.classList.remove("success"),c.classList.remove("success"),e.reset(),T.textContent=""):e.matches("#footer_form")?(I.style.display="block",c.classList.remove("success"),e.reset(),T.textContent=""):(w.textContent="Извините, произошла ошибка. Повторите попытку позже.",E.innerHTML="1999",e.reset(),setTimeout((function(){w.textContent=""}),5e3)),console.error(s)}))}}));var o=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:e})}}))}(),e=document.querySelector(".head-slider"),t=document.getElementById("totop"),document.addEventListener("scroll",(function(){e.getBoundingClientRect().bottom>=0?t.style.display="none":t.style.display="block"})),function(){var e=document.querySelector(".top-menu"),t=null;window.addEventListener("scroll",(function(){if(null==t){for(var c=getComputedStyle(e,""),s="",n=0;n<c.length;n++)0!=c[n].indexOf("overflow")&&0!=c[n].indexOf("padding")&&0!=c[n].indexOf("border")&&0!=c[n].indexOf("outline")&&0!=c[n].indexOf("box-shadow")&&0!=c[n].indexOf("background")||(s+=c[n]+": "+c.getPropertyValue(c[n])+"; ");(t=document.createElement("div")).style.cssText=s+" box-sizing: border-box; width: "+e.offsetWidth+"px;",e.insertBefore(t,e.firstChild);for(var o=e.childNodes.length,l=1;l<o;l++)t.appendChild(e.childNodes[1]);e.style.height="100%",e.style.padding="0",e.style.border="0"}e.getBoundingClientRect().top<=0&&window.screen.width<768?t.className="sticky":t.className="",window.addEventListener("resize",(function(){e.children[0].style.width=getComputedStyle(e,"").width}),!1)}),!1);var c=document.querySelector(".menu-button"),s=document.querySelector(".popup-menu");c.addEventListener("click",(function(){s.style.display="flex"})),s.addEventListener("click",(function(e){e.target.matches(".scroll-item, .close-menu-button")&&(s.style.display="none")}))}()})();