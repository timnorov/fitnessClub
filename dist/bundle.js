(()=>{"use strict";var e,t,s,c;s=document.querySelector(".main-slider").querySelectorAll(".slide"),c=0,setInterval((function(){s[c].classList.add("hidden-block"),++c>=s.length&&(c=0),s[c].classList.remove("hidden-block")}),2e3),function(){for(var e,t=document.querySelector(".gallery-slider"),s=document.querySelectorAll(".gallery-slides"),c=document.querySelector(".switchers"),n=0,o=function(e,t,s){e[t].classList.remove(s)},l=function(e,t,s){e[t].classList.add(s)},i=function(){o(s,n,"gallery-slides-active"),o(m,n,"dot-active"),++n>=s.length&&(n=0),l(s,n,"gallery-slides-active"),l(m,n,"dot-active")},a=function(){e=setInterval(i,2e3)},r=0;r<s.length;r++){var d=document.createElement("li");c.appendChild(d),0===r?(d.classList.add("dot"),d.classList.add("dot-active")):d.classList.add("dot")}var m=document.querySelectorAll(".dot");t.addEventListener("click",(function(e){var t=e.target;t.matches(".fa-chevron-right, .photoGallery__next, .photoGallery__prev, .fa-chevron-left, .dot")&&(o(s,n,"gallery-slides-active"),o(m,n,"dot-active"),t.matches(".photoGallery__next")||t.matches(".fa-chevron-right")?n++:t.matches(".photoGallery__prev")||t.matches(".fa-chevron-left")?n--:t.matches(".dot")&&m.forEach((function(e,s){e===t&&(n=s)})),n>=s.length&&(n=0),n<0&&(n=s.length-1),l(s,n,"gallery-slides-active"),l(m,n,"dot-active"))})),t.addEventListener("mouseover",(function(t){t.target.matches(".fa-chevron-right, .photoGallery__next, .photoGallery__prev, .fa-chevron-left, .dot")&&clearInterval(e)})),t.addEventListener("mouseout",(function(e){e.target.matches(".fa-chevron-right, .photoGallery__next, .photoGallery__prev, .fa-chevron-left, .dot")&&a()})),a()}(),function(){var e=document.querySelectorAll(".name"),t=document.getElementById("free-visit-name"),s=document.getElementById("callback_form2-phone"),c=document.getElementById("callback_form1-name"),n=document.getElementById("callback_form1-phone");e.forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^А-Яа-я ]/,"")})),e.addEventListener("focus",(function(){e.style.border="1px solid #ffd11a"})),e.addEventListener("blur",(function(){e.style.border="",""!==e.value&&(e.value=e.value.replace(/\s+/g," ").trim(),e.value=e.value.replace(/[-]+/g,"-"),e.value=e.value.replace(/^\-+|\-+$/g,""),e.value=e.value.split(/\s+/).map((function(e){return e[0].toUpperCase()+e.substring(1)})).join(" "))}))})),maskPhone(".phone");var o=window.location.pathname.split("/").pop(),l=(document.querySelector(".club-select"),document.querySelector("body")),i=document.querySelector(".clubs-show");i.classList.add("hidden-block"),l.addEventListener("click",(function(e){var t=e.target;if(t.classList.contains("choose-club"))i.classList.toggle("hidden-block");else if(t.classList.contains("clubs-show")&&t.classList.contains("clubs-show-item")){if(t.classList.contains("clubs-show")||t.classList.contains("clubs-show-item"))return}else i.classList.add("hidden-block")}));var a=document.querySelector(".open-popup"),r=document.getElementById("free_visit_form"),d=document.querySelector(".callback-btn"),m=document.getElementById("callback_form");a.addEventListener("click",(function(){r.style.display="block"})),d.addEventListener("click",(function(){m.style.display="block"}));var u=document.querySelector(".fixed-gift"),h=document.getElementById("gift");document.addEventListener("click",(function(e){var o=e.target;console.log(o),o.classList.contains("overlay")||o.classList.contains("close_icon")||o.classList.contains("close-btn")||o.classList.contains("btn-ok1")||o.classList.contains("btn-ok2")?(x.classList.add("hidden-block"),T.classList.add("hidden-block"),document.getElementById("form2").style.display="block",document.getElementById("form2").reset(),document.getElementById("form1").style.display="block",document.getElementById("form1").reset(),t.classList.remove("success"),s.classList.remove("success"),c.classList.remove("success"),n.classList.remove("success"),r.style.display="none",m.style.display="none",S.style.display="none",B.style.display="none",h.style.display="none"):o.classList.contains("gift-icon")&&(h.style.display="block",u.classList.add("hidden-block"))}));var v,y=document.getElementById("card_order"),f=document.getElementById("m1"),p=document.getElementById("m2"),k=document.getElementById("m3"),L=document.getElementById("m4"),g=document.getElementById("card_leto_mozaika"),b=document.getElementById("card_leto_schelkovo"),_=document.getElementById("promocode"),E=document.getElementById("price-total");""!==o&&"index.html"!==o||y.addEventListener("click",(function(e){var t=e.target;t.matches("#m1")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===f.checked?(_.value="",E.innerHTML="1999"):t.matches("#m2")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===p.checked?(_.value="",E.innerHTML="9990"):t.matches("#m3")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===k.checked?(_.value="",E.innerHTML="13900"):(t.matches("#m4")&&!0===g.checked||t.matches("#card_leto_mozaika")&&!0===L.checked)&&(_.value="",E.innerHTML="19900"),t.matches("#m1")&&!0===b.checked||t.matches("#card_leto_schelkovo")&&!0===f.checked?(_.value="",E.innerHTML="2999"):t.matches("#m2")&&!0===b.checked||t.matches("#card_leto_schelkovo")&&!0===p.checked?(_.value="",E.innerHTML="14990"):t.matches("#m3")&&!0===b.checked||t.matches("#card_leto_schelkovo")&&!0===k.checked?(_.value="",E.innerHTML="21990"):(t.matches("#m4")&&!0===b.checked||t.matches("#card_leto_schelkovo")&&!0===L.checked)&&(_.value="",E.innerHTML="24990"),v=E.innerHTML})),""!==o&&"index.html"!==o||_.addEventListener("input",(function(){"ТЕЛО2020"===_.value?E.innerHTML=v-Math.ceil(.3*E.innerText):"ТЕЛО2020"!==_&&(E.innerHTML=v)}));var x=document.querySelector(".status-message-form1"),T=document.querySelector(".status-message-form2"),S=document.getElementById("thanks"),B=document.getElementById("bad-connection"),C="Сообщение отправлено. Наши менеджеры свяжутся с Вами в ближайшее время.",I=document.querySelectorAll("form"),q=document.createElement("div"),w=document.createElement("div");q.style.cssText="font-size: 1rem; margin-top: 5px; text-align: center; color: green",w.style.cssText="font-size: 1rem; margin-top: 5px; text-align: center; color: #d93025",I.forEach((function(e){var t=e.querySelector(".name"),s=e.querySelector(".phone"),c=e.querySelector(".checkbox"),n=e.querySelector(".radio");e.addEventListener("submit",(function(l){if(l.preventDefault(),!e.matches("#footer_form")&&t.classList.contains("success")&&s.classList.contains("success")&&!1===c.checked)e.appendChild(w),w.textContent="Необходимо согласиться на обработку данных";else if(e.matches("#footer_form")&&s.classList.contains("success")&&!1===c.checked&&!1===n.checked)e.appendChild(w),w.textContent="Необходимо выбрать один клуб";else if(!e.matches("#footer_form")&&t.classList.contains("success")&&s.classList.contains("success")&&!0===c.checked||s.classList.contains("success")&&!0===n.checked||e.matches("#footer_form")&&s.classList.contains("success")&&!0===n.checked||e.matches("#footer_form")&&s.classList.contains("success")&&!0===c.checked){w.textContent="",e.appendChild(q),q.innerHTML="  \n            <div class='sk-fading-circle'>\n                <div class='sk-circle sk-circle-1'></div>\n                <div class='sk-circle sk-circle-2'></div>\n                <div class='sk-circle sk-circle-3'></div>\n                <div class='sk-circle sk-circle-4'></div>\n                <div class='sk-circle sk-circle-5'></div>\n                <div class='sk-circle sk-circle-6'></div>\n                <div class='sk-circle sk-circle-7'></div>\n                <div class='sk-circle sk-circle-8'></div>\n                <div class='sk-circle sk-circle-9'></div>\n                <div class='sk-circle sk-circle-10'></div>\n                <div class='sk-circle sk-circle-11'></div>\n                <div class='sk-circle sk-circle-12'></div>\n            </div>\n            ";var i=new FormData(e);o(i).then((function(c){if(200!==c.status)throw new Error("status error not 200");e.classList.contains("form1")||e.classList.contains("form2")?(e.style.display="none",e.removeChild(q),S.style.display="block",setTimeout((function(){S.style.display="none",r.style.display="none",m.style.display="none"}),4e3)):e.matches("#banner-form")?(S.style.display="block",setTimeout((function(){S.style.display="none"}),4e3),t.classList.remove("success"),s.classList.remove("success"),e.reset(),q.textContent=""):e.matches("#footer_form")?(S.style.display="block",setTimeout((function(){S.style.display="none"}),4e3),s.classList.remove("success"),e.reset(),q.textContent=""):e.classList.contains("card_order1")?(t.classList.remove("success"),s.classList.remove("success"),_.classList.remove("success"),q.textContent=C,E.innerHTML="1999",e.reset(),setTimeout((function(){q.textContent=""}),5e3)):(t.classList.remove("success"),s.classList.remove("success"),q.textContent=C,e.reset(),setTimeout((function(){q.textContent=""}),5e3))})).catch((function(c){e.classList.contains("form1")||e.classList.contains("form2")?(e.style.display="none",B.style.display="block",setTimeout((function(){B.style.display="none",r.style.display="none",m.style.display="none"}),4e3)):e.matches("#banner-form")?(B.style.display="block",setTimeout((function(){B.style.display="none"}),4e3),t.classList.remove("success"),s.classList.remove("success"),e.reset(),q.textContent=""):e.matches("#footer_form")?(B.style.display="block",setTimeout((function(){B.style.display="none"}),4e3),s.classList.remove("success"),e.reset(),q.textContent=""):(w.textContent="Извините, произошла ошибка. Повторите попытку позже.",E.innerHTML="1999",e.reset(),setTimeout((function(){w.textContent=""}),5e3)),console.error(c)}))}}));var o=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:e})}}))}(),e=document.querySelector(".head-slider"),t=document.getElementById("totop"),document.addEventListener("scroll",(function(){e.getBoundingClientRect().bottom>=0?t.style.display="none":t.style.display="block"})),function(){var e=document.querySelector(".top-menu"),t=null;window.addEventListener("scroll",(function(){if(null==t){for(var s=getComputedStyle(e,""),c="",n=0;n<s.length;n++)0!=s[n].indexOf("overflow")&&0!=s[n].indexOf("padding")&&0!=s[n].indexOf("border")&&0!=s[n].indexOf("outline")&&0!=s[n].indexOf("box-shadow")&&0!=s[n].indexOf("background")||(c+=s[n]+": "+s.getPropertyValue(s[n])+"; ");(t=document.createElement("div")).style.cssText=c+" box-sizing: border-box; width: "+e.offsetWidth+"px;",e.insertBefore(t,e.firstChild);for(var o=e.childNodes.length,l=1;l<o;l++)t.appendChild(e.childNodes[1]);e.style.height="100%",e.style.padding="0",e.style.border="0"}e.getBoundingClientRect().top<=0&&window.screen.width<768?t.className="sticky":t.className="",window.addEventListener("resize",(function(){e.children[0].style.width=getComputedStyle(e,"").width}),!1)}),!1);var s=document.querySelector(".menu-button"),c=document.querySelector(".popup-menu");s.addEventListener("click",(function(){c.style.display="flex"})),c.addEventListener("click",(function(e){e.target.matches(".scroll-item, .close-menu-button")&&(c.style.display="none")}))}()})();